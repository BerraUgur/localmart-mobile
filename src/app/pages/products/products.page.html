<ion-header [translucent]="true">
  <ion-toolbar color="warning">
    <ion-buttons slot="start">
    </ion-buttons>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/" text=""></ion-back-button>
    </ion-buttons>
    <ion-title>Products</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/product-add" *ngIf="currentRole === 'Seller'">
        Add Product
        <ion-icon name="add"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <h3 *ngIf="currentRole === 'Seller'" class="ion-margin-bottom">Your Products</h3>
    <div *ngIf="currentRole === 'Seller' && sellerProducts.length === 0">
      <p class="ion-margin-bottom">You have no products yet.</p>
      <ion-button routerLink="/product-add" expand="block" color="warning" class="">Add Product</ion-button>
    </div>

    <ion-item class="item-avatar" *ngFor="let product of sellerProducts" routerLink="/product-detail/{{product.id}}">
      <div class="img">
        <img src="{{apiUrl}}{{product.mainImage}}" alt="{{ product.name }}">
      </div>
      <div class="detail">
        <h2>{{product.name}}</h2>
        <p>{{product.description}}</p>
        <div class="price">
          <div class="price">
            <del *ngIf="product.price">{{ product.price }} TL</del>
            <strong *ngIf="product.discountedPrice">{{ product.discountedPrice }} TL</strong>
          </div>
        </div>
      </div>
    </ion-item>

    <br *ngIf="currentRole === 'Seller'">
    <h3 *ngIf="currentRole === 'Seller'" class="ion-margin-bottom">Other Products</h3>
    <div class="select-form mb-10">

      <ion-item class="ion-margin-bottom">
        <ion-label position="floating">Filter: Showing <strong>{{ filteredProducts.length }}</strong> out of <strong>{{
            notSellerProducts.length }}</strong> products</ion-label>
        <ion-select value="all" (ionChange)="updateFilter($event)">
          <ion-select-option value="all">All Cities</ion-select-option>
          <ion-select-option *ngFor="let city of cities" [value]="city">{{ city }}</ion-select-option>
        </ion-select>
      </ion-item>
    </div>

    <div class="bd-wrapper-1" *ngIf="filteredProducts.length > 0;">
      <ion-item class="item-avatar" *ngFor="let product of filteredProducts"
        routerLink="/product-detail/{{product.id}}">
        <div class="img">
          <img [src]="getImageUrl(product.mainImage)" alt="{{ product.name }}">
        </div>
        <div class="detail">
          <h2>{{product.name}}</h2>
          <p>{{product.description}}</p>
          <div class="price">
            <div class="price">
              <del *ngIf="product.price">{{ product.price }} TL</del>
              <strong *ngIf="product.discountedPrice">{{ product.discountedPrice }} TL</strong>
            </div>
          </div>
        </div>
      </ion-item>
    </div>
  </ion-list>
</ion-content>